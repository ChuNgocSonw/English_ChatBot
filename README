# English AI Tutor - Chatbot Project

Má»™t chatbot thÃ´ng minh sá»­ dá»¥ng RAG (Retrieval-Augmented Generation) Ä‘á»ƒ tráº£ lá»i cÃ¡c cÃ¢u há»i vá» ngá»¯ phÃ¡p, tá»« vá»±ng vÃ  thÃ nh ngá»¯ tiáº¿ng Anh, Ä‘á»“ng thá»i cung cáº¥p tÃ­nh nÄƒng phÃ¡t Ã¢m báº±ng giá»ng Ä‘á»c AI.

## âœ¨ TÃ­nh NÄƒng ChÃ­nh

* Tra cá»©u Kiáº¿n thá»©c (RAG):
    * TÃ¬m kiáº¿m thÃ´ng tin vá» tá»« vá»±ng (nghÄ©a, phiÃªn Ã¢m, vÃ­ dá»¥), quy táº¯c ngá»¯ phÃ¡p, vÃ  thÃ nh ngá»¯ tá»« cÆ¡ sá»Ÿ dá»¯ liá»‡u Supabase.
    * Sá»­ dá»¥ng Vector Embeddings (Google AI) vÃ  `pgvector` Ä‘á»ƒ tÃ¬m kiáº¿m dá»±a trÃªn ngá»¯ nghÄ©a.
* Xá»­ lÃ½ NgÃ´n ngá»¯ Tá»± nhiÃªn:
    * Tá»± Ä‘á»™ng phÃ¡t hiá»‡n ngÃ´n ngá»¯ cá»§a ngÆ°á»i dÃ¹ng (Tiáº¿ng Anh/Tiáº¿ng Viá»‡t).
    * TrÃ­ch xuáº¥t tá»« khÃ³a tiáº¿ng Anh chÃ­nh tá»« cÃ¢u há»i.
    * PhÃ¢n biá»‡t giá»¯a cÃ¢u há»i kiáº¿n thá»©c (Q&A) vÃ  trÃ² chuyá»‡n thÃ´ng thÆ°á»ng.
    * Ghi nhá»› ngá»¯ cáº£nh cuá»™c trÃ² chuyá»‡n Ä‘á»ƒ hiá»ƒu cÃ¡c cÃ¢u há»i ná»‘i tiáº¿p.
* PhÃ¡t Ã¢m (Text-to-Speech):
    * Táº¡o giá»ng Ä‘á»c AI cháº¥t lÆ°á»£ng cao cho tá»« vá»±ng tiáº¿ng Anh báº±ng Google AI (Gemini TTS).
    * LÆ°u trá»¯ (cache) cÃ¡c file Ã¢m thanh Ä‘Ã£ táº¡o vÃ o Supabase Storage Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ vÃ  tiáº¿t kiá»‡m chi phÃ­.
    * Tá»± Ä‘á»™ng thá»­ láº¡i (retry) khi gáº·p lá»—i giá»›i háº¡n quota API.
* Giao diá»‡n NgÆ°á»i dÃ¹ng:
    * Giao diá»‡n chat Ä‘Æ¡n giáº£n, trá»±c quan.
    * Hiá»ƒn thá»‹ Ä‘á»‹nh dáº¡ng Markdown (in Ä‘áº­m, danh sÃ¡ch).
    * Hiá»ƒn thá»‹ nÃºt nghe bÃªn cáº¡nh tá»« vá»±ng.
    * Hiá»ƒn thá»‹ tráº¡ng thÃ¡i Ä‘ang chá» pháº£n há»“i.
* Song ngá»¯: Tráº£ lá»i cÃ¡c cÃ¢u há»i kiáº¿n thá»©c báº±ng cáº£ tiáº¿ng Anh (thÃ´ng tin gá»‘c) vÃ  tiáº¿ng Viá»‡t (giáº£i thÃ­ch, vÃ­ dá»¥).

---

## ğŸ› ï¸ CÃ´ng Nghá»‡ Sá»­ Dá»¥ng

* Backend:
    * Python 3.x
    * FastAPI (Web framework)
    * Uvicorn (ASGI server)
    * Google Generative AI SDK (`google-generativeai`)
    * Supabase Python Client (`supabase-py`)
    * dotenv (`python-dotenv`)
* Frontend:
    * HTML
    * Tailwind CSS (Styling)
    * JavaScript (Fetch API, DOM manipulation)
    * Showdown.js (Markdown rendering)
* Database & Storage:
    * Supabase (PostgreSQL with `pgvector` extension)
    * Supabase Storage

---

## âš™ï¸ CÃ i Äáº·t vÃ  Thiáº¿t Láº­p

1.  Clone Repository:

    git clone <your-repository-url>
    cd english_chatbot_project


2.  YÃªu cáº§u:
    * Python 3.7+

3.  (Khuyáº¿n nghá»‹) Táº¡o vÃ  KÃ­ch hoáº¡t MÃ´i trÆ°á»ng áº£o:

    # Táº¡o mÃ´i trÆ°á»ng áº£o
    python -m venv venv

    # KÃ­ch hoáº¡t trÃªn Windows (PowerShell)
    .\venv\Scripts\Activate.ps1
    # Hoáº·c Windows (Command Prompt)
    .\venv\Scripts\activate.bat
    # Hoáº·c macOS/Linux
    source venv/bin/activate


4.  CÃ i Ä‘áº·t Dependencies:

    pip install -r requirements.txt

    *(File `requirements.txt` chá»©a danh sÃ¡ch cÃ¡c thÆ° viá»‡n Python cáº§n thiáº¿t).*

5.  Thiáº¿t láº­p Biáº¿n MÃ´i trÆ°á»ng:
    * Táº¡o má»™t file tÃªn lÃ  `.env` trong thÆ° má»¥c gá»‘c (`english_chatbot_project`).
    * ThÃªm cÃ¡c khÃ³a API cá»§a báº¡n vÃ o file `.env`:

        SUPABASE_URL="YOUR_SUPABASE_URL"
        SUPABASE_KEY="YOUR_SUPABASE_SERVICE_KEY"
        GOOGLE_API_KEY="YOUR_GOOGLE_API_KEY"

    * Thay tháº¿ cÃ¡c giÃ¡ trá»‹ `YOUR_...` báº±ng thÃ´ng tin thá»±c táº¿ tá»« Supabase vÃ  Google AI Studio.

6.  Thiáº¿t láº­p Supabase:
    * Táº¡o project trÃªn Supabase.
    * Trong SQL Editor, cháº¡y cÃ¡c lá»‡nh SQL Ä‘á»ƒ táº¡o báº£ng (`english_vocabulary`, `english_grammar_rules`, `english_idioms`) vÃ  cÃ¡c hÃ m tÃ¬m kiáº¿m (`match_...`). Äáº£m báº£o kÃ­ch hoáº¡t extension `vector`.
    * Táº¡o má»™t Storage Bucket tÃªn lÃ  `audio_cache` vÃ  Ä‘áº·t nÃ³ lÃ  public.
    * Cháº¡y script `embedding.py` Ä‘á»ƒ táº¡o vector embeddings cho dá»¯ liá»‡u ban Ä‘áº§u cá»§a báº¡n.

---

## â–¶ï¸ Cháº¡y á»¨ng Dá»¥ng

Báº¡n cáº§n cháº¡y hai server cÃ¹ng lÃºc trong hai cá»­a sá»• terminal riÃªng biá»‡t, Ä‘á»u tá»« thÆ° má»¥c gá»‘c (`english_chatbot_project`).

1.  Terminal 1: Cháº¡y Backend (API Server):

    python -m uvicorn backend.main:app --reload

    * Server API sáº½ cháº¡y táº¡i `http://127.0.0.1:8000`.
    * Báº¡n cÃ³ thá»ƒ xem tÃ i liá»‡u API tá»± Ä‘á»™ng (Swagger UI) táº¡i: `http://127.0.0.1:8000/docs/default/get_answer_answer_post

2.  Terminal 2: Cháº¡y Frontend (Giao diá»‡n):

    python .\run_frontend.py

    * Server giao diá»‡n sáº½ cháº¡y táº¡i `http://localhost:8080`.

3.  Truy cáº­p Chatbot: Má»Ÿ trÃ¬nh duyá»‡t web vÃ  truy cáº­p `http://localhost:8080`.

---

## ğŸš€ HÆ°á»›ng PhÃ¡t Triá»ƒn TÆ°Æ¡ng Lai

* Má»Ÿ rá»™ng bá»™ dá»¯ liá»‡u (tá»« vá»±ng, ngá»¯ phÃ¡p, thÃ nh ngá»¯).
* ThÃªm chá»©c nÄƒng quáº£n lÃ½ ngÆ°á»i dÃ¹ng (Ä‘Äƒng nháº­p/Ä‘Äƒng kÃ½).
* LÆ°u lá»‹ch sá»­ chat cho tá»«ng ngÆ°á»i dÃ¹ng.
* Cáº£i thiá»‡n kháº£ nÄƒng hiá»ƒu cÃ¡c cÃ¢u há»i phá»©c táº¡p hÆ¡n.
* Triá»ƒn khai lÃªn má»™t ná»n táº£ng hosting (vÃ­ dá»¥: Vercel, Heroku, Google Cloud Run).

---

## ğŸ¤ ÄÃ³ng GÃ³p


---

## ğŸ“„ Giáº¥y PhÃ©p
